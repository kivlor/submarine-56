var gameSize,playState;gameSize=4,playState={create:function(){return this.cursor=game.input.keyboard.createCursorKeys(),this.space=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.world.setBounds(0,0,game.world.width*gameSize,game.world.height*gameSize),this.createWalls(),this.createOcean(),this.createPlayer(),this.createTorpedo(),this.createSurface(),game.camera.follow(this.sub,this.camera.FOLLOW_LOCKON)},update:function(){return game.physics.arcade.collide(this.sub,this.walls),game.physics.arcade.collide(this.sub,this.floor),game.physics.arcade.collide(this.sub,this.sky),this.movePlayer()},render:function(){},createWalls:function(){var e,t;return this.walls=game.add.group(),this.walls.enableBody=!0,e=game.add.tileSprite(-1,0,1,game.world.height,"trans",0,this.walls),t=game.add.tileSprite(game.world.width,0,game.world.width+1,game.world.height,"trans",0,this.walls),this.walls.setAll("body.immovable",!0)},createOcean:function(){return this.ocean=game.add.tileSprite(0,96,game.world.width,game.world.height,"ocean"),game.physics.arcade.enable(this.ocean),this.ocean.body.immovable=!0,this.floor=game.add.tileSprite(0,game.world.height-16,game.world.width,game.world.height,"floor"),game.physics.arcade.enable(this.floor),this.floor.body.immovable=!0,this.sand=game.add.tileSprite(0,game.world.height-32,game.world.width,game.world.height,"sand"),game.physics.arcade.enable(this.sand),this.sand.body.immovable=!0},createSurface:function(){return this.surface=game.add.tileSprite(0,96,game.world.width,4,"surface",0),this.surface.animations.add("waves",[0,1],1,!0),this.surface.animations.play("waves"),this.sky=game.add.tileSprite(0,0,game.world.width,36,"sky"),game.physics.arcade.enable(this.sky),this.sky.body.immovable=!0},createPlayer:function(){return this.sub=game.add.sprite(game.world.centerX,132,"sub56"),this.sub.anchor.setTo(.5,1),this.sub.animations.add("left",[0,1,2,3],24,!0),this.sub.animations.add("right",[4,5,6,7],24,!0),this.sub.animations.play("right"),this.sub.direction="right",game.physics.arcade.enable(this.sub),this.sub.body.gravity.y=50},movePlayer:function(){return this.cursor.left.isDown?(this.sub.body.velocity.x=-150,this.sub.animations.play("left"),this.sub.direction="left"):this.cursor.right.isDown?(this.sub.body.velocity.x=150,this.sub.animations.play("right"),this.sub.direction="right"):this.sub.body.velocity.x=0,this.sub.body.velocity.y=this.cursor.up.isDown?-100:this.cursor.down.isDown?100:50,this.space.onDown.addOnce(this.fireTorpedo,this)},killPlayer:function(){return game.state.start("menu")},createTorpedo:function(){return this.torpedos=game.add.group(),this.torpedos.enableBody=!0,this.torpedos.createMultiple(3,"torpedo")},fireTorpedo:function(){var e;if(e=this.torpedos.getFirstDead())return e.anchor.setTo(.5,.5),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,"right"===this.sub.direction?(e.angle=0,e.reset(this.sub.x+this.sub.width/2,this.sub.y-16),e.body.velocity.x=400):(e.angle=180,e.reset(this.sub.x-this.sub.width/2,this.sub.y-16),e.body.velocity.x=-400)}};